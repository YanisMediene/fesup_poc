<div class="system-settings-container">
  <div class="header">
    <button class="back-button" (click)="goBack()">
      â† Retour au Dashboard
    </button>
    <h1>âš™ï¸ RÃ©glages SystÃ¨me</h1>
    <p class="subtitle">Gestion globale du systÃ¨me et purge des donnÃ©es</p>
  </div>

  <div *ngIf="error" class="error-message">
    {{ error }}
  </div>

  <div *ngIf="loading" class="loading">
    Chargement...
  </div>

  <!-- Statistiques systÃ¨me -->
  <div class="stats-section" *ngIf="stats && !loading">
    <h2>ğŸ“Š Statistiques SystÃ¨me</h2>
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon">ğŸ‘¥</div>
        <div class="stat-value">{{ stats.eleves }}</div>
        <div class="stat-label">Ã‰lÃ¨ves</div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">ğŸ“</div>
        <div class="stat-value">{{ stats.voeux }}</div>
        <div class="stat-label">VÅ“ux</div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">ğŸ¯</div>
        <div class="stat-value">{{ stats.activites }}</div>
        <div class="stat-label">ActivitÃ©s</div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">ğŸ›ï¸</div>
        <div class="stat-value">{{ stats.sessions }}</div>
        <div class="stat-label">Sessions</div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">âœ…</div>
        <div class="stat-value">{{ stats.affectations }}</div>
        <div class="stat-label">Affectations</div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">ğŸ«</div>
        <div class="stat-value">{{ stats.lycees }}</div>
        <div class="stat-label">LycÃ©es</div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">ğŸšª</div>
        <div class="stat-value">{{ stats.salles }}</div>
        <div class="stat-label">Salles</div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">â°</div>
        <div class="stat-value">{{ stats.creneaux }}</div>
        <div class="stat-label">CrÃ©neaux</div>
      </div>
    </div>
  </div>

  <!-- Section d'export des donnÃ©es -->
  <div class="export-section">
    <h2>ğŸ“¥ Export des DonnÃ©es</h2>
    <p class="export-description">
      TÃ©lÃ©chargez les donnÃ©es du systÃ¨me au format CSV
    </p>

    <div class="export-grid">
      <button class="btn-export" (click)="exportEleves()">
        <span class="export-icon">ğŸ‘¥</span>
        <span class="export-label">Ã‰lÃ¨ves</span>
      </button>

      <button class="btn-export" (click)="exportActivites()">
        <span class="export-icon">ğŸ¯</span>
        <span class="export-label">ActivitÃ©s</span>
      </button>

      <button class="btn-export" (click)="exportSalles()">
        <span class="export-icon">ğŸšª</span>
        <span class="export-label">Salles</span>
      </button>

      <button class="btn-export" (click)="exportCreneaux()">
        <span class="export-icon">â°</span>
        <span class="export-label">CrÃ©neaux</span>
      </button>

      <button class="btn-export" (click)="exportLycees()">
        <span class="export-icon">ğŸ«</span>
        <span class="export-label">LycÃ©es</span>
      </button>

      <button class="btn-export" (click)="exportVoeux()">
        <span class="export-icon">ğŸ“</span>
        <span class="export-label">VÅ“ux</span>
      </button>

      <button class="btn-export" (click)="exportSessions()">
        <span class="export-icon">ğŸ›ï¸</span>
        <span class="export-label">Sessions</span>
      </button>

      <button class="btn-export" (click)="exportAffectations()">
        <span class="export-icon">âœ…</span>
        <span class="export-label">Affectations</span>
      </button>
    </div>

    <div class="export-all-container">
      <button class="btn-export-all" (click)="exportAll()">
        <span class="export-icon">ğŸ“¦</span>
        <span class="export-label">Exporter toutes les donnÃ©es (ZIP)</span>
      </button>
    </div>
  </div>

  <!-- Zone de danger -->
  <div class="danger-zone">
    <h2>âš ï¸ Zone de Danger</h2>
    <div class="danger-card">
      <div class="danger-header">
        <h3>ğŸ—‘ï¸ Purge Totale des DonnÃ©es</h3>
        <span class="danger-badge">IRRÃ‰VERSIBLE</span>
      </div>
      <p class="danger-description">
        Cette action supprimera TOUTES les donnÃ©es du systÃ¨me (vÅ“ux, affectations, sessions, Ã©lÃ¨ves, activitÃ©s, salles, crÃ©neaux, lycÃ©es).
      </p>
      <p class="danger-note">
        âœ… Les comptes administrateurs seront prÃ©servÃ©s
      </p>
      <button 
        class="btn-danger" 
        (click)="purgeAllData()" 
        [disabled]="loading"
      >
        ğŸ—‘ï¸ SUPPRIMER TOUTES LES DONNÃ‰ES
      </button>
    </div>
  </div>
</div>
