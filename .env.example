# ============================================
# Variables d'Environnement - FESUP Application
# ============================================
# 
# Ce fichier documente toutes les variables d'environnement
# utilisées par l'application en fonction du contexte de déploiement
#

# ============================================
# BACKEND (Spring Boot)
# ============================================

# Profil Spring Boot (dev, prod)
SPRING_PROFILES_ACTIVE=prod

# --- Base de données (Docker Compose) ---
SPRING_DATASOURCE_URL=jdbc:postgresql://db:5432/fesup_db
SPRING_DATASOURCE_USERNAME=postgres
SPRING_DATASOURCE_PASSWORD=postgres

# --- Base de données (Render.com) ---
# Render injecte automatiquement DATABASE_URL au format :
# postgresql://user:password@host:port/database
# DATABASE_URL=postgresql://fesup_user:password@host/fesup_db

# JPA/Hibernate
SPRING_JPA_HIBERNATE_DDL_AUTO=update
SPRING_JPA_SHOW_SQL=false

# Port du serveur (Render injecte dynamiquement)
# PORT=8080

# Configuration JVM
JAVA_OPTS=-Xmx450m -Xms256m -XX:+UseContainerSupport -XX:MaxRAMPercentage=80.0

# Stockage des tickets PDF
APPLICATION_TICKETS_STORAGE_PATH=/app/tickets

# CORS (Render ajoute automatiquement les domaines *.onrender.com)
# CORS_ALLOWED_ORIGINS=http://localhost,https://*.onrender.com

# ============================================
# FRONTEND (Angular + Nginx)
# ============================================

# Port Nginx (Render utilise 10000, Docker Compose utilise 80)
# PORT=10000

# URL du Backend (Render injecte automatiquement)
# BACKEND_URL=https://fesup-backend.onrender.com
# ou pour Docker Compose :
# BACKEND_URL=http://backend:8080

# ============================================
# DATABASE (PostgreSQL)
# ============================================

# Nom de la base de données
POSTGRES_DB=fesup_db

# Utilisateur PostgreSQL
POSTGRES_USER=postgres

# Mot de passe PostgreSQL
POSTGRES_PASSWORD=postgres

# Emplacement des données
PGDATA=/var/lib/postgresql/data/pgdata

# ============================================
# NOTES IMPORTANTES
# ============================================
#
# 1. Docker Compose Local :
#    - Utilise SPRING_DATASOURCE_URL, SPRING_DATASOURCE_USERNAME, SPRING_DATASOURCE_PASSWORD
#    - PORT backend : 8080 (interne)
#    - PORT frontend : 80 (exposé)
#    - BACKEND_URL : http://backend:8080
#
# 2. Render.com Production :
#    - Utilise DATABASE_URL (format PostgreSQL natif)
#    - PORT backend : Auto-injecté par Render (généralement 8080)
#    - PORT frontend : Auto-injecté par Render (généralement 10000)
#    - BACKEND_URL : Auto-lié au service backend
#
# 3. Sécurité :
#    - NE JAMAIS committer un fichier .env avec des vraies credentials
#    - Utiliser des secrets Render pour les valeurs sensibles
#    - Changer les mots de passe par défaut en production
#
# 4. Valeurs par défaut :
#    - Toutes les variables ont des fallbacks dans le code
#    - Si une variable n'est pas définie, la valeur par défaut est utilisée
#    - Voir application-prod.properties et Dockerfiles pour les fallbacks
#
